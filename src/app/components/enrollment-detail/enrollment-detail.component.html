<!-- src/app/components/enrollment-detail/enrollment-detail.component.html -->
<div class="container">
  <h2>
    <span *ngIf="enrollmentId; else newEnrollment">Edit Enrollment</span>
    <ng-template #newEnrollment>Enrollment Details</ng-template>
  </h2>

  <div *ngIf="loading" class="loading">
    Loading enrollment details...
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error">
    <form (ngSubmit)="updateEnrollment()" #enrollmentForm="ngForm">

      <!-- Student ID -->
      <div class="form-group">
        <label for="studentId">Student ID:</label>
        <input
          type="number"
          id="studentId"
          name="studentId"
          [(ngModel)]="enrollment.studentId"
          required
          min="1"
          class="form-control"
        >
        <small class="form-text">Enter valid student ID</small>
      </div>

      <!-- Course -->
      <div class="form-group">
        <label for="courseId">Course:</label>
        <select
          id="courseId"
          name="courseId"
          [(ngModel)]="enrollment.courseId"
          required
          class="form-control"
        >
          <option value="" disabled>Select a course</option>
          <option
            *ngFor="let course of availableCourses"
            [value]="course.id"
          >
            {{ course.id }} - {{ course.name }} ({{ course.department }})
          </option>
        </select>
        <small class="form-text">Select from available courses</small>
      </div>

      <!-- Enrollment Date -->
      <div class="form-group">
        <label for="enrollmentDate">Enrollment Date:</label>
        <input
          type="date"
          id="enrollmentDate"
          name="enrollmentDate"
          [(ngModel)]="formattedDate"
          required
          class="form-control"
        >
      </div>

      <!-- Grade -->
      <div class="form-group">
        <label for="grade">Grade:</label>
        <select
          id="grade"
          name="grade"
          [(ngModel)]="enrollment.grade"
          class="form-control"
        >
          <option [ngValue]="null">No Grade Yet</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
          <option value="F">F</option>
        </select>
      </div>

      <!-- Status -->
      <div class="form-group">
        <label for="status">Status:</label>
        <select
          id="status"
          name="status"
          [(ngModel)]="enrollment.status"
          required
          class="form-control"
        >
          <option value="ACTIVE">Active</option>
          <option value="COMPLETED">Completed</option>
          <option value="DROPPED">Dropped</option>
        </select>
      </div>

      <!-- Buttons -->
      <div class="button-group">
        <button
          type="submit"
          [disabled]="saving || !enrollmentForm.form.valid"
          class="btn-save"
        >
          <span *ngIf="!saving">Save Changes</span>
          <span *ngIf="saving">Saving...</span>
        </button>

        <button
          type="button"
          (click)="deleteEnrollment()"
          class="btn-delete"
          [disabled]="saving"
        >
          Delete Enrollment
        </button>

        <button
          type="button"
          (click)="goBack()"
          class="btn-cancel"
          [disabled]="saving"
        >
          Back to List
        </button>
      </div>

    </form>
  </div>
</div>
